<% if @produtos.any? %>
  <div class="absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto">
    <% @produtos.each do |produto| %>
      <div class="px-4 py-3 hover:bg-gray-100 cursor-pointer border-b border-gray-100 flex justify-between items-center"
           data-action="click->pdv#adicionarProdutoPorEvento"
           data-produto-id="<%= produto.id %>"
           data-produto-nome="<%= produto.pro_nome %>"
           data-produto-preco="<%= produto.pro_valor_venda %>"
           data-produto-codigo="<%= produto.pro_codigo %>">
        <div class="flex-1">
          <div class="font-medium text-gray-900"><%= produto.pro_nome %></div>
          <div class="text-sm text-gray-500 flex flex-wrap gap-2 mt-1">
            <span>Cód: <%= produto.pro_codigo %></span>
            <span>|</span>
            <span class="<%= produto.pro_quantidade > 0 ? 'text-green-600' : 'text-red-600' %>">
              Estoque: <%= produto.pro_quantidade %>
            </span>
            <% if produto.pro_estoque_minimo && produto.pro_quantidade <= produto.pro_estoque_minimo && produto.pro_quantidade > 0 %>
              <span class="text-orange-500 font-medium">• Baixo estoque</span>
            <% elsif produto.pro_quantidade <= 0 %>
              <span class="text-red-500 font-medium">• Esgotado</span>
            <% end %>
          </div>
        </div>
        <div class="text-right ml-4">
          <div class="font-semibold text-tags-rosa">
            <%= number_to_currency(produto.pro_valor_venda, unit: "R$ ", separator: ",", delimiter: ".") %>
          </div>
          <div class="text-xs text-gray-400 mt-1">Clique para adicionar</div>
        </div>
      </div>
    <% end %>
  </div>
<% else %>
  <div class="absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg">
    <div class="px-4 py-3 text-center text-gray-500">
      Nenhum produto encontrado
    </div>
  </div>
<% end %>